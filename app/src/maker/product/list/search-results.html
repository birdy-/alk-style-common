<div class="sheet">
    <div class="row" ng-hide="products.length == 0">
        <div class="col-sm-4 col-sm-offset-8 text-right pagination-block">
            <span class="btn btn-success arrow-prev" ng-if="request.offset > 0" ng-click="prev()"><i class="fa fa-arrow-left"></i></span>
            <span class="pagination-text">{{ request.offset }} - {{ request.offset + products.length }}</span>
            <span class="btn btn-success arrow-next" ng-if="request.limit === products.length" ng-click="next()"><i class="fa fa-arrow-right"></i></span>
        </div>
    </div>
    <div class="row products" ng-hide="request.busy">
        <div ng-repeat="product in products | unique:'isIdentifiedBy.0.reference' track by product.isIdentifiedBy.0.reference" class="col-sm-2 product">
            <div class="picture missing-picture" ng-click="show(product, $index)">
                <div class="ratio" ng-style="{'background-image': 'url(' + product.urlPictureOriginal + ')'}"  style="height: 100px;">
                </div>
            </div>
            <div class="name">
                <!-- Use the first ProductReference linked to identify the product -->
                <a ng-click="show(product, $index)">
                    {{ product.namePublicLong || product.nameLegal }}
                </a>
            </div>
            <div class="packaging">
                {{ product.packaging }}
            </div>
            <div class="reference text-center">
                <span class="badge" ng-repeat="reference in product.isIdentifiedBy | limitTo:1" >
                    {{ reference.reference }}
                </span>
            </div>
            <div class="product-icons">
                <span class="label label-success" ng-show="product.isCertified()">
                    <i class="fa fa-check"></i> Certifié
                </span>
            </div>
        </div>
        <!--
        <div class="col-sm-2 product new">
            <div class="picture">
                <div class="ratio">+</div>
            </div>
            <div class="name">
                <a href="/#/maker/product/create">
                    Nouveau produit
                </a>
            </div>
            <div class="packaging">
            </div>
            <div class="product-icons">
            </div>
        </div>
        -->
    </div>
    <div class="row" ng-if="request.busy">
        <div class="col-sm-12 text-center">
            <br/>
            <br/>
            <br/>
            <i class="fa fa-spinner fa-spin fa-4x"></i>
        </div>
    </div>
    <div class="row" ng-if="!request.busy && products.length == 0">
        <div class="col-sm-12 text-center">
            <br/>
            <br/>
            <br/>
            <h3>Aucun produit trouvé.</h3>
            <small>Vos filtres sont peut-être trop spécifiques, ou vous n'êtes pas autorisé à accéder au produit demandé.</small>
        </div>
    </div>
    <div class="row" ng-hide="products.length == 0">
        <div class="col-sm-4 col-sm-offset-8 text-right pagination-block">
            <span class="btn btn-success arrow-prev" ng-if="request.offset > 0" ng-click="prev()"><i class="fa fa-arrow-left"></i></span>
            <span class="pagination-text">{{ request.offset }} - {{ request.offset + products.length }}</span>
            <span class="btn btn-success arrow-next" ng-if="request.limit === products.length" ng-click="next()"><i class="fa fa-arrow-right"></i></span>
        </div>
    </div>
</div>

